# Credit Card & Bank Statement Monitor

A Claude-powered tool for reviewing Israeli credit card and bank statements. Point it at your existing statement files — it parses the PDFs, flags suspicious transactions, tracks recurring payments, and populates a local spending dashboard. No external services required.

---

## What it does

- **`/setup`** — One-time wizard. You tell it where your statement files are, it auto-detects providers and card numbers, asks only what it can't infer (your name, card labels), writes `personal-info/cards.yaml`, and processes every statement automatically.
- **`/review-spending`** — Run each month when a new statement arrives. Claude reads the PDF, flags anomalies, verifies recurring payments, and updates the dashboard.
- **Dashboard** (`dashboard/index.html`) — Static HTML file, open directly in a browser. Monthly spending by category, trend history, recurring payments, and a bank account cash-flow view (automatically gets updated when you run either setup or review spending of new file)
- **Spending profile** (`personal-info/spending-profile.md`) — Auto-maintained baseline of known merchants, recurring payments, and monthly averages. Updated after every review.

---

## Prerequisites

- [Claude Code](https://claude.ai/claude-code) CLI
- `pdftotext` — `brew install poppler`
- For bank statements: `pip3 install openpyxl`

---

## Getting started

### 1. Have your files ready

This tool reads your files in-place — you don't need to move or copy anything into the project.

**Credit card statements** — PDF files downloaded from your card provider's website, organized in folders by year:
```
~/Documents/statements/
  2025/
    2025_11_max.pdf
    דף פירוט דיגיטלי כאל 11-25.pdf
    ...
  2026/
    2026_2_max.pdf
    ...
```

**Bank statement** (optional) — an Excel export from your bank's checking account (*עובר ושב*), downloaded from your bank's website.

### 2. Run setup

Open Claude Code in this project directory and run:

```
/setup
```

Claude will ask you for the path to your statements folder (and bank Excel if you have one), then:
- Scan the folder for PDFs and Excel files, auto-detect each provider (Max, CAL, etc.) and card numbers by reading them
- Infer the PDF filename patterns across months automatically
- Ask only a few things it can't determine: your name, and a label for each card (e.g. "Personal", "Business")
- Write `personal-info/cards.yaml`
- Process every statement found, oldest first, building your spending profile as it goes
- Import the bank Excel if provided
- Open the dashboard

That's it. No manual config file editing required.

---

## Monthly workflow

When a new statement arrives, run:

```
/review-spending <provider_key> <MM> <YYYY>
```

Examples:
```
/review-spending max 03 2026
/review-spending cal1234 03 2026
/review-spending cal5678 03 2026
```

Claude will print the review (suspicious items → high amounts → category breakdown → recurring check), update the spending profile, and refresh the dashboard data. Then open `dashboard/index.html`.

For a new bank statement, just tell Claude: *"Import my bank statement from `~/Downloads/filename.xlsx`"* and it handles the rest.

---

## Dashboard

Open `dashboard/index.html` directly — no web server needed.

| Tab | What it shows |
|-----|--------------|
| **Monthly Review** | Spending by category (pie + trend chart), recurring payment status, flagged transactions. Select card and month from dropdowns. For Max (multi-card), chip filters split by card number. |
| **Bank Account** | Income, CC payments, investments, other outflows. Account balance as of last transaction. 12-month trend chart. |
| **Spending Profile** | All cards overview, combined monthly trend, recurring payments by category, known merchants, foreign countries. |

---

## Adding a new statement provider

If your card isn't Max or CAL, run `/setup` — it will detect the unknown provider, show you a sample of the extracted text, and ask if you want to add support for it. Claude will analyze the PDF layout and add a new format section to `CLAUDE.md` automatically.

---

## Files reference

| File | Purpose | Git-tracked |
|------|---------|-------------|
| `personal-info/cards.yaml` | Your card config (auto-generated by `/setup`) | ❌ private |
| `cards.example.yaml` | Reference template | ✅ |
| `CLAUDE.md` | Instructions for Claude + PDF format specs per provider | ✅ |
| `personal-info/spending-profile.md` | Auto-maintained spending baseline | ❌ private |
| `.claude/skills/setup/SKILL.md` | The `/setup` skill | ✅ |
| `.claude/skills/review-spending/SKILL.md` | The `/review-spending` skill | ✅ |
| `dashboard/index.html` | The spending dashboard | ✅ |
| `dashboard/build.sh` | Bundles data files for offline use | ✅ |
| `personal-info/dashboard/data/*.json` | Generated per-month data (auto-generated) | ❌ private |
| `personal-info/dashboard/data.js` | Bundled dashboard data (auto-generated) | ❌ private |
